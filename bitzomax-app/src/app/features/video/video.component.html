<div class="container mx-auto py-8" *ngIf="video">
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
    <!-- Main Video Section -->
    <div class="md:col-span-2">
      <div class="video-container border-2 border-hot-pink rounded-lg overflow-hidden shadow-hot-pink">
        <video #videoPlayer class="w-full h-full object-cover" [poster]="video.thumbnailUrl" (timeupdate)="checkVideoTime()">
          <source [src]="video.videoUrl" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        
        <!-- Subscription Overlay (shown after 30 seconds for non-subscribers) -->
        <div *ngIf="showSubscriptionBanner" class="absolute inset-0 flex flex-col items-center justify-center bg-deep-purple bg-opacity-90 p-6 text-center">
          <h3 class="text-2xl font-bold text-neon-green mb-4 glitch-text">Premium Content</h3>
          <p class="text-electric-blue mb-6">Subscribe to continue watching this premium video and unlock our entire content library.</p>
          <button (click)="subscribe()" class="cyber-button text-lg py-3 px-8">
            Subscribe Now <span class="ml-1">â‚¬6/mo</span>
          </button>
          <p class="text-hot-pink mt-4">No contracts. Cancel anytime.</p>
        </div>
        
        <!-- Video Controls -->
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-cyber-black p-4">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              <button (click)="togglePlayPause()" class="text-neon-green hover:text-hot-pink transition-colors" [attr.aria-label]="isPlaying ? 'Pause video' : 'Play video'" title="Play/Pause video">
                <i class="fas" [ngClass]="isPlaying ? 'fa-pause' : 'fa-play'"></i>
              </button>
              <div class="text-electric-blue">{{ formatDuration(currentTime) }} / {{ formatDuration(video.duration) }}</div>
            </div>
            <div>
              <button (click)="toggleLike()" class="text-hot-pink hover:text-neon-green transition-colors" [attr.aria-label]="isLiked ? 'Unlike video' : 'Like video'" title="Like/Unlike video">
                <i class="fas" [ngClass]="isLiked ? 'fa-heart' : 'fa-heart-o'"></i>
                {{ video.likes }}
              </button>
            </div>
          </div>
          <!-- Progress Bar -->
          <div class="mt-2 h-1 bg-deep-purple rounded overflow-hidden">
            <div class="bg-hot-pink h-full" [style.width.%]="(currentTime / video.duration) * 100"></div>
          </div>
        </div>
      </div>
      
      <!-- Video Info -->
      <div class="mt-4 p-4 bg-cyber-black bg-opacity-60 border border-electric-blue rounded-lg">
        <h1 class="text-2xl font-bold text-electric-blue mb-2">{{ video.title }}</h1>
        <div class="flex items-center justify-between mb-4">
          <span class="text-neon-green">{{ video.views | number }} views</span>
          <span *ngIf="video.isPremium" class="text-hot-pink font-bold">PREMIUM</span>
        </div>
        <p class="text-white">
          {{ video.description }}
        </p>
        <div class="mt-4 flex flex-wrap gap-2">
          <span *ngFor="let tag of video.tags" class="bg-deep-purple px-2 py-1 rounded text-electric-blue text-xs">
            #{{ tag }}
          </span>
        </div>
      </div>
    </div>
    
    <!-- Related Videos Sidebar -->
    <div class="md:col-span-1">
      <h3 class="text-xl font-bold text-hot-pink mb-4 border-l-4 border-hot-pink pl-4">
        Related Videos
      </h3>
      <div class="space-y-4">
        <!-- Related Video Items -->
        <div *ngFor="let relatedVideo of relatedVideos" class="flex border border-neon-green rounded-lg overflow-hidden bg-cyber-black">
          <div class="w-1/3 aspect-[9/16] relative">
            <img [src]="relatedVideo.thumbnailUrl" [alt]="relatedVideo.title" title="Video thumbnail" class="w-full h-full object-cover">
          </div>
          <div class="w-2/3 p-3">
            <h4 class="text-electric-blue font-bold line-clamp-2">{{ relatedVideo.title }}</h4>
            <p class="text-white text-xs line-clamp-1">{{ relatedVideo.description }}</p>
            <div class="flex justify-between mt-2 text-xs">
              <span class="text-neon-green">{{ relatedVideo.views | number }} views</span>
              <span *ngIf="relatedVideo.isPremium" class="text-hot-pink">Premium</span>
            </div>
          </div>
        </div>
        
        <!-- If no related videos are found -->
        <div *ngIf="relatedVideos.length === 0" class="border border-hot-pink rounded-lg p-4 bg-deep-purple bg-opacity-30">
          <p class="text-electric-blue text-center">No related videos found</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading state -->
<div *ngIf="!video" class="container mx-auto py-8 text-center">
  <div class="cyber-grid h-64 flex flex-col items-center justify-center">
    <h2 class="text-2xl text-hot-pink mb-4">Loading video...</h2>
    <div class="w-24 h-1 bg-deep-purple">
      <div class="bg-neon-green h-full animate-pulse"></div>
    </div>
  </div>
</div>
